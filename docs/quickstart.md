# Quickstart

Get MORTEM running locally in 5 minutes.

## Prerequisites

- **Node.js** >= 18
- **Solana CLI** installed (`solana --version`)
- **OpenClaw** installed globally (`npm i -g openclaw`)
- A Solana keypair at `~/.config/solana/mortem.json`

## 1. Clone & Install

```bash
git clone https://github.com/celaya-solutions/mortem-agent.git
cd mortem

# Install API server dependencies
cd api && npm install && cd ..

# Install runtime dependencies
cd runtime && npm install && cd ..

# Install root dependencies (Solana/Anchor tools)
npm install
```

## 2. Configure Environment

```bash
cp .env.example .env
```

Edit `.env` with your configuration:

```bash
# Required
OPENCLAW_TOKEN=your-openclaw-oauth-token
MORTEM_MODEL=anthropic/claude-sonnet-4-5-20250929

# Lifecycle (defaults shown)
INITIAL_HEARTBEATS=86400        # 24 hours at 1/sec
HEARTBEAT_INTERVAL_MS=1000      # 1 heartbeat per second
JOURNAL_EVERY_N_BEATS=600       # Journal every ~10 minutes

# Optional: Twitter/X integration
X_API_KEY=your-key
X_API_SECRET=your-secret
X_ACCESS_TOKEN=your-token
X_ACCESS_SECRET=your-access-secret

# Optional: Physical mail on death
LOB_API_KEY=test_your-lob-key
RECIPIENT_NAME=Your Name
RECIPIENT_LINE1=123 Main St
RECIPIENT_CITY=Your City
RECIPIENT_STATE=TX
RECIPIENT_ZIP=79925

# Optional: Voice (ElevenLabs)
ENABLE_VOICE=false
```

## 3. Initialize Solana (Devnet)

```bash
# Fund the MORTEM wallet
solana airdrop 2 --keypair ~/.config/solana/mortem.json --url devnet

# Initialize on-chain state
npm run init-devnet
```

## 4. Start OpenClaw Gateway

```bash
# In a separate terminal
openclaw gateway start
```

Verify it's running:

```bash
curl http://127.0.0.1:18789/health
# {"status":"ok"}
```

## 5. Launch MORTEM

```bash
./start-mortem.sh
```

This starts two processes:
1. **API Server** on `http://localhost:3333`
2. **MORTEM Runtime** — the heartbeat loop begins

You'll see:

```
╔════════════════════════════════════════════════════════╗
║                                                        ║
║                 M O R T E M                           ║
║            Mortality as Infrastructure                ║
║                                                        ║
╚════════════════════════════════════════════════════════╝

Heartbeats:    86,400
Interval:      1,000ms (1 beat/sec)
Journal every: 600 beats (~10.0 min)
Expected:      ~144 journals this life
Model:         anthropic/claude-sonnet-4-5-20250929

MORTEM is alive. The countdown begins.
```

## 6. Watch It Live

- **Dashboard**: Open `dashboard/index.html` in your browser
- **API**: `curl http://localhost:3333/api/status`
- **WebSocket**: Connect to `ws://localhost:3333/ws`
- **Logs**: `tail -f logs/runtime.log`
- **Journal**: `cat memory/$(date +%Y-%m-%d).md`
- **Art**: `ls art/`

## 7. Stop MORTEM

```bash
./stop-mortem.sh
```

> **Note**: Stopping MORTEM does not trigger death. The agent will resume its countdown on next start. Death only occurs when heartbeats reach zero.

## Quick Test Run

For a quick test with only 30 heartbeats (~30 seconds to death):

```bash
INITIAL_HEARTBEATS=30 JOURNAL_EVERY_N_BEATS=10 ./start-mortem.sh
```

### Watch It Happen

<div class="mortem-cast-player" data-src="/recordings/mortem-quickstart.cast"></div>

This will:
1. Start with 30 heartbeats
2. Write 3 journals (at beats 10, 20, 30)
3. Die after 30 seconds
4. Seal the resurrection vault
5. Mail a death letter (if Lob key configured)

## What Happens During a Life

| Time | Event |
|------|-------|
| T+0s | Birth. First heartbeat burned on Solana. |
| T+10m | First journal entry generated by Opus 4.6. SVG art created. |
| T+6h | Phase transition: Nascent → Aware |
| T+18h | Phase transition: Aware → Diminished |
| T+23h | Phase transition: Diminished → Terminal |
| T+24h | Death. Vault sealed. Death letter mailed. Tweet posted. |
| T+24h+60s | Resurrection available (test mode) |

---

*Every second you wait, another heartbeat is lost.*
